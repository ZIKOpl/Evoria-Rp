<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Streamers — District WL</title>
  <link rel="icon" type="image/png" href="../assets/logo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="../assets/css/style.css">
  <style>
    .streamers-hero {
      padding-top: 80px;
      min-height: 35vh;
      display: flex; align-items: center; justify-content: center;
      position: relative; overflow: hidden; text-align: center;
    }
    .streamers-hero-bg {
      position: absolute; inset: 0;
      background:
        radial-gradient(ellipse 80% 60% at 50% -10%, rgba(255,26,26,.25), transparent),
        radial-gradient(ellipse 50% 50% at 80% 110%, rgba(255,26,26,.2), transparent);
    }
    .streamers-hero-content { position: relative; z-index: 2; padding: 3rem 1.5rem 2.5rem; }
    .streamers-hero-eyebrow {
      font-size: .65rem; font-weight: 800; letter-spacing: 3px; text-transform: uppercase;
      color: var(--p3); margin-bottom: .9rem;
      display: flex; align-items: center; justify-content: center; gap: .65rem;
    }
    .streamers-hero-eyebrow::before, .streamers-hero-eyebrow::after {
      content: ''; display: block; width: 36px; height: 1px;
      background: linear-gradient(90deg, transparent, var(--p3));
    }
    .streamers-hero-eyebrow::after { background: linear-gradient(90deg, var(--p3), transparent); }
    .streamers-hero-title {
      font-family: var(--ff-title); font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 700; letter-spacing: 4px; text-transform: uppercase;
      background: linear-gradient(135deg, #fff 30%, var(--acc) 65%, var(--p3) 100%);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      background-clip: text; margin-bottom: .9rem; line-height: 1;
    }
    .streamers-hero-sub { font-size: .88rem; color: var(--muted); max-width: 460px; margin: 0 auto; line-height: 1.7; }
    .live-count-badge {
      display: inline-flex; align-items: center; gap: .5rem;
      background: rgba(239,68,68,.1); border: 1px solid rgba(239,68,68,.28);
      border-radius: 20px; padding: .3rem .95rem;
      font-size: .7rem; font-weight: 800; letter-spacing: 1px;
      color: #ef4444; margin-top: 1.2rem;
    }
    .live-count-badge .lc-dot { width: 7px; height: 7px; border-radius: 50%; background: #ef4444; animation: pulseLive 1.4s ease-in-out infinite; }
    .live-count-badge.hidden { display: none; }
    @keyframes pulseLive { 0%,100% { opacity:1; } 50% { opacity:.4; } }
    .streamers-filters {
      display: flex; align-items: center; justify-content: center; gap: .45rem;
      padding: 0 1.5rem 2rem; flex-wrap: wrap;
    }
    .sf-btn {
      padding: .38rem .95rem; border-radius: 20px;
      font-size: .72rem; font-weight: 700; letter-spacing: .5px;
      border: 1px solid rgba(255,26,26,.2); background: transparent;
      color: var(--muted); cursor: pointer; transition: all .2s; font-family: var(--ff-body);
    }
    .sf-btn:hover { color: var(--text); border-color: rgba(255,26,26,.45); background: rgba(255,26,26,.08); }
    .sf-btn.on { color: var(--acc); border-color: rgba(255,180,180,.5); background: rgba(255,26,26,.14); }
    .streamers-page-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
      max-width: 1500px;
      margin: 0 auto;
      padding: 0 2rem 5rem;
    }
    @media (max-width: 900px) {
      .streamers-page-grid { grid-template-columns: repeat(2, 1fr); gap: 1rem; padding: 0 1rem 4rem; }
      .streamers-hero-title { font-size: 2rem; }
    }
    @media (max-width: 500px) {
      .streamers-page-grid { grid-template-columns: 1fr; gap: .8rem; padding: 0 1rem 4rem; }
    }
    @media (min-width: 1500px) {
      .streamers-page-grid { grid-template-columns: repeat(4, 1fr); }
    }
  </style>
</head>
<body>

<nav class="navbar" id="navbar">
  <a href="../index.html" class="nav-logo">
    <img src="../assets/logo.png" alt="District WL"
      onerror="this.outerHTML='<span style=&quot;font-family:var(--ff-title);font-size:1.3rem;font-weight:700;letter-spacing:3px;background:linear-gradient(135deg,#FF4444,#FFB3B3);-webkit-background-clip:text;-webkit-text-fill-color:transparent&quot;>DISTRICT WL</span>'">
  </a>
  <ul class="nav-links" id="nav-links">
    <li><a data-boutique href="#" target="_blank" rel="noopener">Boutique</a></li>
    <li><a data-reglement href="#" target="_blank" rel="noopener">Règlement</a></li>
    <li><a href="votes.html">Voter</a></li>
    <li><a href="streamers.html" class="active">Streamers</a></li>
    <li><a href="whitelist.html">Whitelist</a></li>
    <li class="nav-drop">
      <a href="#">Support
        <svg width="10" height="6" viewBox="0 0 11 7" fill="none"><path d="M1 1l4.5 4.5L10 1" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </a>
      <div class="drop-menu">
        <a href="#" id="btn-aide">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
          Aide
        </a>
        <a href="#" id="btn-admin">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          Admin
        </a>
      </div>
    </li>
    <li id="nav-join-btn">
      <a data-discord href="#" target="_blank" rel="noopener" class="btn-join">
        <svg width="16" height="12" viewBox="0 0 71 55" fill="currentColor"><path d="M60.1 4.9A58.6 58.6 0 0 0 45.7 0a.22.22 0 0 0-.23.11 40.8 40.8 0 0 0-1.8 3.7c-5.46-.82-10.89-.82-16.23 0-.48-1.16-1.2-2.59-1.82-3.7a.23.23 0 0 0-.23-.11A58.4 58.4 0 0 0 10.9 4.9a.21.21 0 0 0-.1.08C1.58 18.73-.94 32.14.29 45.39a.24.24 0 0 0 .09.17c6.07 4.46 11.96 7.17 17.73 8.96a.23.23 0 0 0 .25-.08 42.1 42.1 0 0 0 3.63-5.9.22.22 0 0 0-.12-.31 38.8 38.8 0 0 1-5.54-2.64.23.23 0 0 1-.02-.38c.37-.28.74-.57 1.1-.86a.22.22 0 0 1 .23-.03c11.61 5.3 24.17 5.3 35.65 0a.22.22 0 0 1 .23.03c.36.29.73.58 1.1.86a.23.23 0 0 1-.02.38 36.4 36.4 0 0 1-5.54 2.64.23.23 0 0 0-.12.31 47.2 47.2 0 0 0 3.62 5.9.22.22 0 0 0 .25.08c5.8-1.79 11.68-4.5 17.76-8.96a.23.23 0 0 0 .09-.16c1.48-15.32-2.48-28.62-10.5-40.41a.18.18 0 0 0-.09-.09ZM23.73 37.33c-3.5 0-6.38-3.21-6.38-7.16s2.83-7.16 6.38-7.16c3.58 0 6.44 3.24 6.38 7.16 0 3.95-2.83 7.16-6.38 7.16Zm23.59 0c-3.5 0-6.38-3.21-6.38-7.16s2.83-7.16 6.38-7.16c3.58 0 6.44 3.24 6.38 7.16 0 3.95-2.83 7.16-6.38 7.16Z"/></svg>
        Nous rejoindre
      </a>
    </li>
  </ul>
  <button class="burger" id="burger" aria-label="Menu"><span></span><span></span><span></span></button>
</nav>

<div class="mobile-menu" id="mobile-menu">
  <a href="../index.html">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
    Accueil
  </a>
  <a data-boutique href="#" target="_blank" rel="noopener">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
    Boutique
  </a>
  <a data-reglement href="#" target="_blank" rel="noopener">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
    Règlement
  </a>
  <a href="votes.html">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M9 12l2 2 4-4"/><rect x="3" y="3" width="18" height="18" rx="3"/></svg>
    Voter
  </a>
  <a href="streamers.html" class="active">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.95-1.96C18.88 4 12 4 12 4s-6.88 0-8.59.46A2.78 2.78 0 0 0 1.46 6.42 29 29 0 0 0 1 12a29 29 0 0 0 .46 5.58 2.78 2.78 0 0 0 1.95 1.96C5.12 20 12 20 12 20s6.88 0 8.59-.46a2.78 2.78 0 0 0 1.95-1.96A29 29 0 0 0 23 12a29 29 0 0 0-.46-5.58z"/><polygon points="9.75 15.02 15.5 12 9.75 8.98 9.75 15.02"/></svg>
    Streamers
  </a>
  <a href="whitelist.html">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
    Whitelist
  </a>
  <div class="mm-sep"></div>
  <a href="#" id="mm-aide">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
    Aide
  </a>
  <a href="#" id="mm-admin">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
    Espace Admin
  </a>
  <div class="mm-sep"></div>
  <a data-discord href="#" target="_blank" rel="noopener" class="mm-discord">Rejoindre le Discord</a>
</div>

<div class="streamers-hero">
  <div class="streamers-hero-bg"></div>
  <div class="streamers-hero-content">
    <div class="streamers-hero-eyebrow">Créateurs de contenu</div>
    <h1 class="streamers-hero-title">STREAMERS</h1>
    <p class="streamers-hero-sub">Nos partenaires streamers — découvrez District WL en direct, en live ou en rediff.</p>
    <div class="live-count-badge hidden" id="live-count-badge">
      <span class="lc-dot"></span>
      <span id="live-count-txt">0 EN LIVE</span>
    </div>
  </div>
</div>

<div class="streamers-filters">
  <button class="sf-btn on" id="filter-all" onclick="filterStreamers('all')">Tous</button>
  <button class="sf-btn" id="filter-live" onclick="filterStreamers('live')">
    <svg width="10" height="10" viewBox="0 0 24 24" fill="#ef4444"><circle cx="12" cy="12" r="8"/></svg>
    En live
  </button>
  <button class="sf-btn" id="filter-off" onclick="filterStreamers('offline')">Hors ligne</button>
</div>

<div class="streamers-page-grid" id="streamers-page-grid"></div>

<footer>
  <div class="footer-logo">DISTRICT WL</div>
  <nav class="footer-nav">
    <a href="../index.html">Accueil</a>
    <a data-boutique href="#">Boutique</a>
    <a data-reglement href="#">Règlement</a>
    <a data-discord href="#" target="_blank">Discord</a>
  </nav>
  <p class="footer-copy">© 2026 District WL — Tous droits réservés</p>
</footer>

<div class="modal-overlay" id="modal-aide">
  <div class="modal" style="max-width:480px">
    <button class="modal-x">✕</button>
    <div class="modal-title">BESOIN D'AIDE ?</div>
    <p class="modal-sub">Une question, un problème ou une demande ?</p>
    <div style="text-align:center;padding:1.5rem 0 .5rem">
      <div style="width:72px;height:72px;border-radius:50%;background:rgba(255,26,26,.12);border:1px solid rgba(255,26,26,.3);display:flex;align-items:center;justify-content:center;margin:0 auto 1.25rem">
        <svg width="36" height="28" viewBox="0 0 71 55" fill="#FF4444"><path d="M60.1 4.9A58.6 58.6 0 0 0 45.7 0a.22.22 0 0 0-.23.11 40.8 40.8 0 0 0-1.8 3.7c-5.46-.82-10.89-.82-16.23 0-.48-1.16-1.2-2.59-1.82-3.7a.23.23 0 0 0-.23-.11A58.4 58.4 0 0 0 10.9 4.9a.21.21 0 0 0-.1.08C1.58 18.73-.94 32.14.29 45.39a.24.24 0 0 0 .09.17c6.07 4.46 11.96 7.17 17.73 8.96a.23.23 0 0 0 .25-.08 42.1 42.1 0 0 0 3.63-5.9.22.22 0 0 0-.12-.31 38.8 38.8 0 0 1-5.54-2.64.23.23 0 0 1-.02-.38c.37-.28.74-.57 1.1-.86a.22.22 0 0 1 .23-.03c11.61 5.3 24.17 5.3 35.65 0a.22.22 0 0 1 .23.03c.36.29.73.58 1.1.86a.23.23 0 0 1-.02.38 36.4 36.4 0 0 1-5.54 2.64.23.23 0 0 0-.12.31 47.2 47.2 0 0 0 3.62 5.9.22.22 0 0 0 .25.08c5.8-1.79 11.68-4.5 17.76-8.96a.23.23 0 0 0 .09-.16c1.48-15.32-2.48-28.62-10.5-40.41a.18.18 0 0 0-.09-.09ZM23.73 37.33c-3.5 0-6.38-3.21-6.38-7.16s2.83-7.16 6.38-7.16c3.58 0 6.44 3.24 6.38 7.16 0 3.95-2.83 7.16-6.38 7.16Zm23.59 0c-3.5 0-6.38-3.21-6.38-7.16s2.83-7.16 6.38-7.16c3.58 0 6.44 3.24 6.38 7.16 0 3.95-2.83 7.16-6.38 7.16Z"/></svg>
      </div>
      <p style="font-size:.92rem;color:var(--text);line-height:1.7;margin-bottom:.5rem">Pour toute question ou demande, rejoignez notre serveur Discord et ouvrez un <strong style="color:var(--p3)">ticket</strong> dans le salon dédié.</p>
      <p style="font-size:.82rem;color:var(--muted);margin-bottom:1.75rem">Notre équipe vous répondra dans les meilleurs délais.</p>
      <a data-discord href="#" target="_blank" rel="noopener" class="btn-discord-oauth" style="text-decoration:none">
        <svg width="20" height="15" viewBox="0 0 71 55" fill="currentColor"><path d="M60.1 4.9A58.6 58.6 0 0 0 45.7 0a.22.22 0 0 0-.23.11 40.8 40.8 0 0 0-1.8 3.7c-5.46-.82-10.89-.82-16.23 0-.48-1.16-1.2-2.59-1.82-3.7a.23.23 0 0 0-.23-.11A58.4 58.4 0 0 0 10.9 4.9a.21.21 0 0 0-.1.08C1.58 18.73-.94 32.14.29 45.39a.24.24 0 0 0 .09.17c6.07 4.46 11.96 7.17 17.73 8.96a.23.23 0 0 0 .25-.08 42.1 42.1 0 0 0 3.63-5.9.22.22 0 0 0-.12-.31 38.8 38.8 0 0 1-5.54-2.64.23.23 0 0 1-.02-.38c.37-.28.74-.57 1.1-.86a.22.22 0 0 1 .23-.03c11.61 5.3 24.17 5.3 35.65 0a.22.22 0 0 1 .23.03c.36.29.73.58 1.1.86a.23.23 0 0 1-.02.38 36.4 36.4 0 0 1-5.54 2.64.23.23 0 0 0-.12.31 47.2 47.2 0 0 0 3.62 5.9.22.22 0 0 0 .25.08c5.8-1.79 11.68-4.5 17.76-8.96a.23.23 0 0 0 .09-.16c1.48-15.32-2.48-28.62-10.5-40.41a.18.18 0 0 0-.09-.09ZM23.73 37.33c-3.5 0-6.38-3.21-6.38-7.16s2.83-7.16 6.38-7.16c3.58 0 6.44 3.24 6.38 7.16 0 3.95-2.83 7.16-6.38 7.16Zm23.59 0c-3.5 0-6.38-3.21-6.38-7.16s2.83-7.16 6.38-7.16c3.58 0 6.44 3.24 6.38 7.16 0 3.95-2.83 7.16-6.38 7.16Z"/></svg>
        Nous rejoindre sur Discord
      </a>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modal-admin-login">
  <div class="modal" style="max-width:420px"><button class="modal-x">✕</button>
    <div class="modal-title">ESPACE ADMIN</div><p class="modal-sub">Connectez-vous avec Discord</p>
    <button id="btn-discord-login" class="btn-discord-oauth">
      <svg width="20" height="15" viewBox="0 0 71 55" fill="currentColor"><path d="M60.1 4.9A58.6 58.6 0 0 0 45.7 0a.22.22 0 0 0-.23.11 40.8 40.8 0 0 0-1.8 3.7c-5.46-.82-10.89-.82-16.23 0-.48-1.16-1.2-2.59-1.82-3.7a.23.23 0 0 0-.23-.11A58.4 58.4 0 0 0 10.9 4.9a.21.21 0 0 0-.1.08C1.58 18.73-.94 32.14.29 45.39a.24.24 0 0 0 .09.17c6.07 4.46 11.96 7.17 17.73 8.96a.23.23 0 0 0 .25-.08 42.1 42.1 0 0 0 3.63-5.9.22.22 0 0 0-.12-.31 38.8 38.8 0 0 1-5.54-2.64.23.23 0 0 1-.02-.38c.37-.28.74-.57 1.1-.86a.22.22 0 0 1 .23-.03c11.61 5.3 24.17 5.3 35.65 0a.22.22 0 0 1 .23.03c.36.29.73.58 1.1.86a.23.23 0 0 1-.02.38 36.4 36.4 0 0 1-5.54 2.64.23.23 0 0 0-.12.31 47.2 47.2 0 0 0 3.62 5.9.22.22 0 0 0 .25.08c5.8-1.79 11.68-4.5 17.76-8.96a.23.23 0 0 0 .09-.16c1.48-15.32-2.48-28.62-10.5-40.41a.18.18 0 0 0-.09-.09ZM23.73 37.33c-3.5 0-6.38-3.21-6.38-7.16s2.83-7.16 6.38-7.16c3.58 0 6.44 3.24 6.38 7.16 0 3.95-2.83 7.16-6.38 7.16Zm23.59 0c-3.5 0-6.38-3.21-6.38-7.16s2.83-7.16 6.38-7.16c3.58 0 6.44 3.24 6.38 7.16 0 3.95-2.83 7.16-6.38 7.16Z"/></svg>
      Se connecter avec Discord
    </button>
  </div>
</div>

<script>const _base = '../';</script>
<script src="../config.js"></script>
<script src="../assets/js/script.js"></script>
<script>
let _currentFilter = 'all';

async function renderStreamersPage() {
  const grid = document.getElementById('streamers-page-grid');
  if (!grid) return;

  // Chargement depuis l'API du bot
  const res = await apiFetch('/api/streamers');
  if (!res || !res.ok) {
    grid.innerHTML = '<div class="sp-empty"><p>Erreur de chargement des streamers.</p></div>';
    return;
  }
  const strs = await res.json();

  if (!strs.length) {
    grid.innerHTML = `<div class="sp-empty">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.95-1.96C18.88 4 12 4 12 4s-6.88 0-8.59.46A2.78 2.78 0 0 0 1.46 6.42 29 29 0 0 0 1 12a29 29 0 0 0 .46 5.58 2.78 2.78 0 0 0 1.95 1.96C5.12 20 12 20 12 20s6.88 0 8.59-.46a2.78 2.78 0 0 0 1.95-1.96A29 29 0 0 0 23 12a29 29 0 0 0-.46-5.58z"/></svg>
      <p>Aucun streamer partenaire pour le moment.</p>
    </div>`;
    return;
  }

  const liveMap = {}, viewerMap = {};
  for (const s of strs) {
    const login = twitchLogin(s.url);
    liveMap[s.id] = login ? await checkTwitchLive(login) : false;
    viewerMap[s.id] = 0;
  }

  const liveCount = Object.values(liveMap).filter(Boolean).length;
  const badge = document.getElementById('live-count-badge');
  const badgeTxt = document.getElementById('live-count-txt');
  if (badge && badgeTxt) {
    if (liveCount > 0) {
      badge.classList.remove('hidden');
      badgeTxt.textContent = liveCount + ' EN LIVE';
    } else {
      badge.classList.add('hidden');
    }
  }

  const sorted = [...strs].sort((a, b) => {
    if (liveMap[a.id] && !liveMap[b.id]) return -1;
    if (!liveMap[a.id] && liveMap[b.id]) return 1;
    return a.name.localeCompare(b.name);
  });

  const filtered = _currentFilter === 'live'
    ? sorted.filter(s => liveMap[s.id])
    : _currentFilter === 'offline'
    ? sorted.filter(s => !liveMap[s.id])
    : sorted;

  document.getElementById('filter-all').classList.toggle('on', _currentFilter === 'all');
  document.getElementById('filter-live').classList.toggle('on', _currentFilter === 'live');
  document.getElementById('filter-off').classList.toggle('on', _currentFilter === 'offline');

  if (!filtered.length) {
    grid.innerHTML = '<div class="sp-empty"><p>Aucun streamer dans cette catégorie.</p></div>';
    return;
  }

  grid.innerHTML = filtered.map(s => {
    const live    = liveMap[s.id];
    const viewers = viewerMap[s.id];
    const login   = twitchLogin(s.url);
    const avatarSrc = s.avatar || '';
    const prevSrc   = login ? twitchPreviewURL(login) : '';
    const chanUrl   = s.url || (login ? `https://www.twitch.tv/${login}` : '#');

    return `<div class="sp-card anim ${live ? 'is-live' : ''}">
      <div class="sp-thumb">
        ${live && prevSrc
          ? `<img class="sp-thumb-img" src="${prevSrc}" alt="${s.name}" loading="lazy" onerror="this.style.display='none'">
             <div class="sp-thumb-gradient"></div>
             <div class="sp-live-badge"><span class="sp-live-dot"></span>LIVE</div>
             ${viewers > 0 ? `<div class="sp-viewers">${viewers.toLocaleString('fr')} viewers</div>` : ''}`
          : `<div class="sp-offline">
               ${avatarSrc ? `<img class="sp-offline-avatar" src="${avatarSrc}" alt="${s.name}" onerror="this.style.display='none'">` : ''}
               <div class="sp-offline-tag">HORS LIGNE</div>
             </div>`
        }
      </div>
      <div class="sp-info">
        ${avatarSrc
          ? `<img class="sp-avatar${live ? ' live-ring' : ''}" src="${avatarSrc}" alt="${s.name}" loading="lazy" onerror="this.className='sp-avatar-ph'">`
          : `<div class="sp-avatar-ph">${s.name.charAt(0).toUpperCase()}</div>`}
        <div class="sp-name-block">
          <div class="sp-name">${s.name}</div>
          <div class="sp-status ${live ? 'live' : 'off'}">
            <span class="s-dot"></span>${live ? 'EN LIVE' : 'Hors ligne'}
          </div>
        </div>
      </div>
      <a href="${chanUrl}" target="_blank" rel="noopener" class="sp-btn">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.95-1.96C18.88 4 12 4 12 4s-6.88 0-8.59.46A2.78 2.78 0 0 0 1.46 6.42 29 29 0 0 0 1 12a29 29 0 0 0 .46 5.58 2.78 2.78 0 0 0 1.95 1.96C5.12 20 12 20 12 20s6.88 0 8.59-.46a2.78 2.78 0 0 0 1.95-1.96A29 29 0 0 0 23 12a29 29 0 0 0-.46-5.58z"/><polygon points="9.75 15.02 15.5 12 9.75 8.98 9.75 15.02"/></svg>
        ${live ? 'Regarder le live' : 'Voir la chaîne'}
      </a>
    </div>`;
  }).join('');

  initAnim();
}

function filterStreamers(type) {
  _currentFilter = type;
  renderStreamersPage();
}

if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', _initStreamersPage);
} else {
  _initStreamersPage();
}
function _initStreamersPage() {
  renderStreamersPage();
  setInterval(renderStreamersPage, 90_000);
}
</script>
</body>
</html>
